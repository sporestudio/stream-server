<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <title>Reproductor de Video HLS</title>
        <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    </head>
    <body>
        <video id="video" controls autoplay style="width: 100%; max-width: 800px;"></video>

        <script>
            // Obtén los parámetros de la URL
            const urlParams = new URLSearchParams(window.location.search);
            const streamUrl = urlParams.get('stream');

            if (!streamUrl) {
                alert('No se proporcionó una URL de streaming.');
            } else {
                const video = document.getElementById('video');

                // Verifica si el navegador soporta HLS de forma nativa
                if (video.canPlayType('application/vnd.apple.mpegurl')) {
                    // Si es compatible, establece la fuente directamente
                    video.src = streamUrl;
                    video.addEventListener('loadedmetadata', function() {
                        video.play();
                    });
                } else if (Hls.isSupported()) {
                    // Si Hls.js es soportado, úsalo
                    const hls = new Hls();
                    hls.loadSource(streamUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.MANIFEST_PARSED, function() {
                        video.play();
                    });
                } else {
                    alert('Este navegador no soporta HLS.');
                }
            }
        </script>
    </body>
</html>
